<Project>
  <PropertyGroup>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
  </PropertyGroup>

  <PropertyGroup>
    <CoverletOutput>$(SolutionDir)</CoverletOutput>
    <CoverletOutputFormat>json,lcov,cobertura</CoverletOutputFormat>
    <MergeWith>$(SolutionDir)/coverage.json</MergeWith>
  </PropertyGroup>

  <Choose>
    <!-- Some dotnet processes like 'dotnet tool restore' create a temporary project file called 'restore.json' -->
    <!-- Ensure, that package references are not injected into these files, as this can lead to errors. -->
    <!-- Details: https://github.com/dotnet/sdk/issues/4281 -->
    <When Condition="$(MSBuildProjectName) != 'restore' AND $(MSBuildProjectName.Contains('AutoGenerated')) != 'True'">
      <ItemGroup>
        <PackageReference Include="Wemogy.StyleCop" Version="0.2.0">
          <PrivateAssets>all</PrivateAssets>
          <IncludeAssets>runtime; build; native; contentfiles; analyzers</IncludeAssets>
        </PackageReference>
      </ItemGroup>
    </When>
  </Choose>

  <PropertyGroup>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <NoWarn>$(NoWarn);1591</NoWarn>
  </PropertyGroup>
</Project>
